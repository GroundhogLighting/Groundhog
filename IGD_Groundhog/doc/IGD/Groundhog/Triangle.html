<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>
  Module: IGD::Groundhog::Triangle
  
    &mdash; Documentation by YARD 0.8.7.6
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" charset="utf-8" />

<script type="text/javascript" charset="utf-8">
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!IGD/Groundhog/Triangle.html";
</script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (T)</a> &raquo;
    <span class='title'><span class='object_link'><a href="../../IGD.html" title="IGD (module)">IGD</a></span></span> &raquo; <span class='title'><span class='object_link'><a href="../Groundhog.html" title="IGD::Groundhog (module)">Groundhog</a></span></span>
     &raquo; 
    <span class="title">Triangle</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link"
        href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link"
        href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link"
        href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: IGD::Groundhog::Triangle
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">IGD_Groundhog/src/Triangle.rb</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    
<p>This module is in charge of triangulating and refining all  Workplane
meshes… far from perfect, but works.</p>


  </div>
</div>
<div class="tags">
  

</div>






  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_area-class_method" title="get_area (class method)">+ (Numeric) <strong>get_area</strong>(a, b, c) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calculates the area of a triangle.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_center-class_method" title="get_center (class method)">+ (SketchUp::Point3d) <strong>get_center</strong>(triangle) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Calculates the center of a triangle, as just the average of all the  
points.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#get_delaunay_triangles-class_method" title="get_delaunay_triangles (class method)">+ (Array) <strong>get_delaunay_triangles</strong>(triangles) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>From a set of triangles it makes just Delaunay-compliant triangles.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#refine_triangles-class_method" title="refine_triangles (class method)">+ (Array) <strong>refine_triangles</strong>(triangles) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Refines a triangle…</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#to_triangles-class_method" title="to_triangles (class method)">+ (Array) <strong>to_triangles</strong>(points, polygons) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Transforms a set of points and polygons into an array of.</p>
</div></span>
  
</li>

      
        <li class="public ">
  <span class="summary_signature">
    
      <a href="#triangulate-class_method" title="triangulate (class method)">+ (Array) <strong>triangulate</strong>(points, polygons) </a>
    

    
  </span>
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class='inline'>
<p>Triangulates and refines a workplane.</p>
</div></span>
  
</li>

      
    </ul>
  



  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="get_area-class_method">
  
    + (<tt>Numeric</tt>) <strong>get_area</strong>(a, b, c) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calculates the area of a triangle</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>a</span>
      
      
        <span class='type'>(<tt>SketchUp::Point3d</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Side a of triangle</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>c</span>
      
      
        <span class='type'>(<tt>SketchUp::Point3d</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Side b of triangle</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>b</span>
      
      
        <span class='type'>(<tt>SketchUp::Point3d</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>Side c of triangle</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Numeric</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The area of the triangle</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>German Molina</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


29
30
31</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'IGD_Groundhog/src/Triangle.rb', line 29</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_area'>get_area</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='op'>+</span><span class='id identifier rubyid_b'>b</span><span class='op'>+</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='op'>*</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='op'>+</span><span class='id identifier rubyid_b'>b</span><span class='op'>+</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='op'>-</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='op'>*</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='op'>+</span><span class='id identifier rubyid_b'>b</span><span class='op'>+</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='op'>-</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span><span class='op'>*</span><span class='lparen'>(</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='op'>+</span><span class='id identifier rubyid_b'>b</span><span class='op'>+</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='op'>-</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='rparen'>)</span><span class='op'>/</span><span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='int'>2</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_center-class_method">
  
    + (<tt>SketchUp::Point3d</tt>) <strong>get_center</strong>(triangle) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Calculates the center of a triangle, as just the average of all the</p>

<pre class="code ruby"><code class="ruby"><span class='id identifier rubyid_points'>points</span>
</code></pre>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>triangle</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of 3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>SketchUp::Point3d</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>The normal of the triangle</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>German Molina</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


146
147
148</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'IGD_Groundhog/src/Triangle.rb', line 146</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_center'>get_center</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='rparen'>)</span>
  <span class='kw'>return</span> <span class='const'>Geom</span><span class='op'>::</span><span class='const'>Point3d</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>3</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>3</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>3</span><span class='rbracket'>]</span><span class='rparen'>)</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="get_delaunay_triangles-class_method">
  
    + (<tt>Array</tt>) <strong>get_delaunay_triangles</strong>(triangles) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
  <div class="note notetag">
    <strong>Note:</strong>
    <div class='inline'>
<p>This might be a horrible algorithm… I made id up from nothing</p>
</div>
  </div>


<p>From a set of triangles it makes just Delaunay-compliant triangles</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>triangles</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of Nx3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of Nx3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>German Molina</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


73
74
75
76
77
78
79
80
81
82
83
84
85
86
87
88
89
90
91
92
93
94
95
96
97
98
99
100
101
102
103
104
105
106
107
108
109
110
111
112
113
114
115
116
117
118
119
120
121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'IGD_Groundhog/src/Triangle.rb', line 73</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_delaunay_triangles'>get_delaunay_triangles</span><span class='lparen'>(</span><span class='id identifier rubyid_triangles'>triangles</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_final_triangles'>final_triangles</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_ratio_threshold'>ratio_threshold</span> <span class='op'>=</span> <span class='int'>1</span>
  <span class='id identifier rubyid_min_area'>min_area</span> <span class='op'>=</span> <span class='float'>0.005</span><span class='op'>/</span><span class='float'>0.00064516</span> <span class='comment'>#in square inches
</span>  <span class='comment'>#first we transform them into Delaunay-compliant triangles
</span>  <span class='id identifier rubyid_triangles'>triangles</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_triangle'>triangle</span><span class='op'>|</span>
    <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_distance'>distance</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_distance'>distance</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_distance'>distance</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_sqrt'>sqrt</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='op'>+</span><span class='id identifier rubyid_b'>b</span><span class='op'>+</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span><span class='op'>*</span><span class='lparen'>(</span><span class='id identifier rubyid_b'>b</span><span class='op'>+</span><span class='id identifier rubyid_c'>c</span><span class='op'>-</span><span class='id identifier rubyid_a'>a</span><span class='rparen'>)</span><span class='op'>*</span><span class='lparen'>(</span><span class='id identifier rubyid_c'>c</span><span class='op'>+</span><span class='id identifier rubyid_a'>a</span><span class='op'>-</span><span class='id identifier rubyid_b'>b</span><span class='rparen'>)</span><span class='op'>*</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='op'>+</span><span class='id identifier rubyid_b'>b</span><span class='op'>-</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>
    <span class='kw'>next</span> <span class='kw'>if</span> <span class='id identifier rubyid_sqrt'>sqrt</span> <span class='op'>&lt;</span> <span class='float'>1e-4</span> <span class='comment'>#ignore triangles that are too long
</span>
    <span class='id identifier rubyid_circumradius'>circumradius</span> <span class='op'>=</span> <span class='id identifier rubyid_a'>a</span><span class='op'>*</span><span class='id identifier rubyid_b'>b</span><span class='op'>*</span><span class='id identifier rubyid_c'>c</span><span class='op'>/</span><span class='const'>Math</span><span class='period'>.</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='lparen'>(</span><span class='id identifier rubyid_sqrt'>sqrt</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_shortest_edge'>shortest_edge</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='id identifier rubyid_c'>c</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_min'>min</span>
    <span class='id identifier rubyid_ratio'>ratio</span> <span class='op'>=</span> <span class='id identifier rubyid_circumradius'>circumradius</span><span class='op'>/</span><span class='id identifier rubyid_shortest_edge'>shortest_edge</span>

    <span class='comment'>#if it is a good triangle or too small: store and next
</span>    <span class='kw'>if</span> <span class='id identifier rubyid_ratio'>ratio</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_ratio_threshold'>ratio_threshold</span> <span class='kw'>or</span> <span class='id identifier rubyid_get_area'>get_area</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_min_area'>min_area</span>  <span class='kw'>then</span>
      <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'>#otherwise, we get the pivot vertex and triangulate
</span>    <span class='id identifier rubyid_pivot'>pivot</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_largest_edge'>largest_edge</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='id identifier rubyid_c'>c</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_max'>max</span>
    <span class='kw'>if</span> <span class='id identifier rubyid_shortest_edge'>shortest_edge</span> <span class='op'>==</span> <span class='id identifier rubyid_a'>a</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_pivot'>pivot</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_largest_edge'>largest_edge</span> <span class='op'>==</span> <span class='id identifier rubyid_c'>c</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_shortest_edge'>shortest_edge</span> <span class='op'>==</span>  <span class='id identifier rubyid_b'>b</span> <span class='kw'>then</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_largest_edge'>largest_edge</span> <span class='op'>==</span> <span class='id identifier rubyid_c'>c</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>elsif</span> <span class='id identifier rubyid_shortest_edge'>shortest_edge</span> <span class='op'>==</span> <span class='id identifier rubyid_c'>c</span> <span class='kw'>then</span>
      <span class='id identifier rubyid_pivot'>pivot</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span>
      <span class='kw'>if</span> <span class='id identifier rubyid_largest_edge'>largest_edge</span> <span class='op'>==</span> <span class='id identifier rubyid_b'>b</span> <span class='kw'>then</span>
        <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
      <span class='kw'>else</span>
        <span class='id identifier rubyid_farthest'>farthest</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span>
        <span class='id identifier rubyid_other'>other</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span>
      <span class='kw'>end</span>
    <span class='kw'>end</span>

    <span class='comment'>#now that we have identified everything, we subdivide (add the 3 new triangles)
</span>    <span class='id identifier rubyid_largest_mid'>largest_mid</span> <span class='op'>=</span> <span class='const'>Geom</span><span class='op'>::</span><span class='const'>Point3d</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='lparen'>(</span><span class='id identifier rubyid_pivot'>pivot</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_farthest'>farthest</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_pivot'>pivot</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_farthest'>farthest</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_pivot'>pivot</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_farthest'>farthest</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span> <span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_other_mid'>other_mid</span> <span class='op'>=</span> <span class='const'>Geom</span><span class='op'>::</span><span class='const'>Point3d</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='lparen'>(</span><span class='id identifier rubyid_pivot'>pivot</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_pivot'>pivot</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_pivot'>pivot</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_other'>other</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span> <span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_pivot'>pivot</span><span class='comma'>,</span> <span class='id identifier rubyid_largest_mid'>largest_mid</span><span class='comma'>,</span> <span class='id identifier rubyid_other_mid'>other_mid</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_other'>other</span><span class='comma'>,</span> <span class='id identifier rubyid_other_mid'>other_mid</span><span class='comma'>,</span> <span class='id identifier rubyid_largest_mid'>largest_mid</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_farthest'>farthest</span><span class='comma'>,</span> <span class='id identifier rubyid_other'>other</span><span class='comma'>,</span> <span class='id identifier rubyid_largest_mid'>largest_mid</span><span class='rbracket'>]</span><span class='rparen'>)</span>

  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_final_triangles'>final_triangles</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="refine_triangles-class_method">
  
    + (<tt>Array</tt>) <strong>refine_triangles</strong>(triangles) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Refines a triangle… It does this by just spliting each edge by half,
forming 4 triangles.</p>

<p>It is expected that the input to this are just Delaunay-compliant triangles</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>triangles</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of Nx3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of Nx3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>German Molina</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


39
40
41
42
43
44
45
46
47
48
49
50
51
52
53
54
55
56
57
58
59
60
61
62
63
64
65
66</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'IGD_Groundhog/src/Triangle.rb', line 39</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_refine_triangles'>refine_triangles</span><span class='lparen'>(</span><span class='id identifier rubyid_triangles'>triangles</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_final_triangles'>final_triangles</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_desired_pixel_area'>desired_pixel_area</span> <span class='op'>=</span> <span class='const'>Config</span><span class='period'>.</span><span class='id identifier rubyid_desired_pixel_area'>desired_pixel_area</span><span class='op'>/</span><span class='float'>0.00064516</span> <span class='comment'>#in square inches
</span>
  <span class='comment'>#first we transform them into Delaunay-compliant triangles (as much as we can)
</span>  <span class='id identifier rubyid_triangles'>triangles</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_triangle'>triangle</span><span class='op'>|</span>
    <span class='id identifier rubyid_a'>a</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_distance'>distance</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_b'>b</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_distance'>distance</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_c'>c</span> <span class='op'>=</span> <span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_distance'>distance</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_area'>area</span> <span class='op'>=</span> <span class='id identifier rubyid_get_area'>get_area</span><span class='lparen'>(</span><span class='id identifier rubyid_a'>a</span><span class='comma'>,</span><span class='id identifier rubyid_b'>b</span><span class='comma'>,</span><span class='id identifier rubyid_c'>c</span><span class='rparen'>)</span>

    <span class='kw'>if</span> <span class='id identifier rubyid_area'>area</span> <span class='op'>&lt;</span> <span class='id identifier rubyid_desired_pixel_area'>desired_pixel_area</span>  <span class='kw'>then</span>
      <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='rparen'>)</span>
      <span class='kw'>next</span>
    <span class='kw'>end</span>

    <span class='comment'>#now, add 4 new triangles
</span>    <span class='id identifier rubyid_p01'>p01</span> <span class='op'>=</span> <span class='const'>Geom</span><span class='op'>::</span><span class='const'>Point3d</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span> <span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_p12'>p12</span> <span class='op'>=</span> <span class='const'>Geom</span><span class='op'>::</span><span class='const'>Point3d</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span> <span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_p20'>p20</span> <span class='op'>=</span> <span class='const'>Geom</span><span class='op'>::</span><span class='const'>Point3d</span><span class='period'>.</span><span class='id identifier rubyid_new'>new</span><span class='lparen'>(</span><span class='lbracket'>[</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_x'>x</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span> <span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_y'>y</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span><span class='comma'>,</span><span class='lparen'>(</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='op'>+</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_z'>z</span><span class='rparen'>)</span><span class='op'>/</span><span class='int'>2</span> <span class='rbracket'>]</span><span class='rparen'>)</span>

    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_p01'>p01</span><span class='comma'>,</span> <span class='id identifier rubyid_p20'>p20</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_p12'>p12</span><span class='comma'>,</span> <span class='id identifier rubyid_p01'>p01</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_triangle'>triangle</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='comma'>,</span> <span class='id identifier rubyid_p20'>p20</span><span class='comma'>,</span> <span class='id identifier rubyid_p12'>p12</span><span class='rbracket'>]</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_final_triangles'>final_triangles</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_p01'>p01</span><span class='comma'>,</span> <span class='id identifier rubyid_p12'>p12</span><span class='comma'>,</span> <span class='id identifier rubyid_p20'>p20</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_final_triangles'>final_triangles</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="to_triangles-class_method">
  
    + (<tt>Array</tt>) <strong>to_triangles</strong>(points, polygons) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Transforms a set of points and polygons into an array of</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>points</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of SketchUp::3DPoint</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>polygons</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a Nx3 array of SketchUp::3DPoint, where each row is a polygon indicating
which triangle in &#39;points&#39; form the triangle</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A 2D array, where each row is one triangle formed by 3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>German Molina</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


12
13
14
15
16
17
18
19
20
21</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'IGD_Groundhog/src/Triangle.rb', line 12</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_to_triangles'>to_triangles</span><span class='lparen'>(</span><span class='id identifier rubyid_points'>points</span><span class='comma'>,</span> <span class='id identifier rubyid_polygons'>polygons</span><span class='rparen'>)</span>
  <span class='id identifier rubyid_ret'>ret</span> <span class='op'>=</span> <span class='lbracket'>[</span><span class='rbracket'>]</span>
  <span class='id identifier rubyid_polygons'>polygons</span><span class='period'>.</span><span class='id identifier rubyid_each'>each</span> <span class='kw'>do</span> <span class='op'>|</span><span class='id identifier rubyid_polygon'>polygon</span><span class='op'>|</span>
    <span class='id identifier rubyid_v0'>v0</span> <span class='op'>=</span> <span class='id identifier rubyid_points'>points</span><span class='lbracket'>[</span><span class='id identifier rubyid_polygon'>polygon</span><span class='lbracket'>[</span><span class='int'>0</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_v1'>v1</span> <span class='op'>=</span> <span class='id identifier rubyid_points'>points</span><span class='lbracket'>[</span><span class='id identifier rubyid_polygon'>polygon</span><span class='lbracket'>[</span><span class='int'>1</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_v2'>v2</span> <span class='op'>=</span> <span class='id identifier rubyid_points'>points</span><span class='lbracket'>[</span><span class='id identifier rubyid_polygon'>polygon</span><span class='lbracket'>[</span><span class='int'>2</span><span class='rbracket'>]</span><span class='period'>.</span><span class='id identifier rubyid_abs'>abs</span><span class='op'>-</span><span class='int'>1</span><span class='rbracket'>]</span>
    <span class='id identifier rubyid_ret'>ret</span><span class='period'>.</span><span class='id identifier rubyid_push'>push</span><span class='lparen'>(</span><span class='lbracket'>[</span><span class='id identifier rubyid_v0'>v0</span><span class='comma'>,</span><span class='id identifier rubyid_v1'>v1</span><span class='comma'>,</span><span class='id identifier rubyid_v2'>v2</span><span class='rbracket'>]</span><span class='rparen'>)</span>
  <span class='kw'>end</span>
  <span class='kw'>return</span> <span class='id identifier rubyid_ret'>ret</span>
<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="triangulate-class_method">
  
    + (<tt>Array</tt>) <strong>triangulate</strong>(points, polygons) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    
<p>Triangulates and refines a workplane</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class='name'>points</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>an array of SketchUp::3DPoint</p>
</div>
      
    </li>
  
    <li>
      
        <span class='name'>polygons</span>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>a Nx3 array of SketchUp::3DPoint, where each row is a polygon indicating
which triangle in &#39;points&#39; form the triangle</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class='type'>(<tt>Array</tt>)</span>
      
      
      
        &mdash;
        <div class='inline'>
<p>A 2D array, where each row is one triangle formed by 3 SketchUp::3DPoint</p>
</div>
      
    </li>
  
</ul>
<p class="tag_title">Author:</p>
<ul class="author">
  
    <li>
      
      
      
      
        
        <div class='inline'>
<p>German Molina</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


155
156
157
158
159
160
161
162
163
164
165
166
167
168
169
170
171
172
173
174
175
176
177
178</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'IGD_Groundhog/src/Triangle.rb', line 155</span>

<span class='kw'>def</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_triangulate'>triangulate</span><span class='lparen'>(</span><span class='id identifier rubyid_points'>points</span><span class='comma'>,</span><span class='id identifier rubyid_polygons'>polygons</span><span class='rparen'>)</span>

  <span class='id identifier rubyid_triangles'>triangles</span> <span class='op'>=</span> <span class='id identifier rubyid_to_triangles'>to_triangles</span><span class='lparen'>(</span><span class='id identifier rubyid_points'>points</span><span class='comma'>,</span><span class='id identifier rubyid_polygons'>polygons</span><span class='rparen'>)</span>
  <span class='comment'>#first, get delaunay-compliant triangles
</span>  <span class='id identifier rubyid_old_n_triangles'>old_n_triangles</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>99</span>
  <span class='id identifier rubyid_did_something'>did_something</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_did_something'>did_something</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_triangles'>triangles</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_get_delaunay_triangles'>get_delaunay_triangles</span><span class='lparen'>(</span><span class='id identifier rubyid_triangles'>triangles</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_did_something'>did_something</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_old_n_triangles'>old_n_triangles</span> <span class='op'>!=</span> <span class='id identifier rubyid_triangles'>triangles</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_old_n_triangles'>old_n_triangles</span> <span class='op'>=</span> <span class='id identifier rubyid_triangles'>triangles</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='kw'>end</span>

  <span class='comment'>#Second, refine the mesh
</span>  <span class='id identifier rubyid_old_n_triangles'>old_n_triangles</span> <span class='op'>=</span> <span class='op'>-</span><span class='int'>99</span>
  <span class='id identifier rubyid_did_something'>did_something</span> <span class='op'>=</span> <span class='kw'>true</span>
  <span class='kw'>while</span> <span class='id identifier rubyid_did_something'>did_something</span> <span class='kw'>do</span>
    <span class='id identifier rubyid_triangles'>triangles</span> <span class='op'>=</span> <span class='kw'>self</span><span class='period'>.</span><span class='id identifier rubyid_refine_triangles'>refine_triangles</span><span class='lparen'>(</span><span class='id identifier rubyid_triangles'>triangles</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_did_something'>did_something</span> <span class='op'>=</span> <span class='lparen'>(</span><span class='id identifier rubyid_old_n_triangles'>old_n_triangles</span> <span class='op'>!=</span> <span class='id identifier rubyid_triangles'>triangles</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span><span class='rparen'>)</span>
    <span class='id identifier rubyid_old_n_triangles'>old_n_triangles</span> <span class='op'>=</span> <span class='id identifier rubyid_triangles'>triangles</span><span class='period'>.</span><span class='id identifier rubyid_length'>length</span>
  <span class='kw'>end</span>

  <span class='kw'>return</span> <span class='id identifier rubyid_triangles'>triangles</span>

<span class='kw'>end</span></pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Fri May 12 15:15:08 2017 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.7.6 (ruby-2.3.0).
</div>

  </body>
</html>